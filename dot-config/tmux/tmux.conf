# Enable mouse support
set -g mouse on

# Additional useful settings
set -g default-terminal "screen-256color"
set -g history-limit 2500
set -g renumber-windows on

# E-INK THEME - Grayscale colors optimized for e-ink displays
# Using bold text for better contrast on low-color-depth displays

# Status bar colors (light background, dark text)
set -g status-style bg=colour255,fg=colour232,bold

# Mode colors (copy mode)
set -g mode-style bg=colour244,fg=colour255,bold

# Window status colors
setw -g window-status-current-style bg=colour244,fg=colour255,bold
setw -g window-status-style bg=colour250,fg=colour232

# Status bar format with indicators
set -g status-left "[#S] "
set -g status-right "#{?client_prefix,ðŸ”´ PREFIX,}#{?pane_in_mode, ðŸ“‹ COPY,} %Y-%m-%d %H:%M"

# Pane border with working directory and pane number
set -g pane-border-status bottom
set -g pane-border-format "[#P] #(echo '#{pane_current_path}' | sed \"s|$HOME|~|g\")"

# Floating pane
bind l display-popup -h 50% -w 50%

# Pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U

# Open new panes/windows in current directory
bind-key c new-window -c "#{pane_current_path}"
bind-key '"' split-window -v -c "#{pane_current_path}"
bind-key '%' split-window -h -c "#{pane_current_path}"

# Clear screen with Ctrl+L
bind -n C-l send-keys C-l
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection

# Enter copy mode and go to top of scrollback
bind [ copy-mode -e

# Vim-style copy mode navigation
setw -g mode-keys vi

# Pane switching with PREFIX + number
bind-key ` select-pane -t 0
bind-key 0 select-pane -t 0
bind-key 1 select-pane -t 1
bind-key 2 select-pane -t 2
bind-key 3 select-pane -t 3
bind-key 4 select-pane -t 4
bind-key 5 select-pane -t 5
bind-key 6 select-pane -t 6
bind-key 7 select-pane -t 7
bind-key 8 select-pane -t 8
bind-key 9 select-pane -t 9

# Alt + backtick/0-9 for window switching (without prefix)
bind-key -n M-` select-window -t 0
bind-key -n M-0 select-window -t 0
bind-key -n M-1 select-window -t 1
bind-key -n M-2 select-window -t 2
bind-key -n M-3 select-window -t 3
bind-key -n M-4 select-window -t 4
bind-key -n M-5 select-window -t 5
bind-key -n M-6 select-window -t 6
bind-key -n M-7 select-window -t 7
bind-key -n M-8 select-window -t 8
bind-key -n M-9 select-window -t 9


# Toggle synchronize panes
bind-key C-s setw synchronize-panes \; display-message "synchronize-panes #{?pane_synchronized,on,off}"

# Plugin manager and session persistence
set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.local/share/tmux/plugins'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-save 'S'
set -g @resurrect-restore 'R'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-save-interval '5'
set -g @continuum-restore 'on'

run '~/.local/share/tmux/plugins/tpm/tpm'
