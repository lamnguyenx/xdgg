# Enable mouse support
set -g mouse on

# Additional useful settings
set -g default-terminal "screen-256color"
set -g history-limit 2500

# E-INK THEME - Grayscale colors optimized for e-ink displays
# Using bold text for better contrast on low-color-depth displays

# Status bar colors (light background, dark text)
set -g status-style bg=colour255,fg=colour232,bold

# Mode colors (copy mode)
set -g mode-style bg=colour244,fg=colour255,bold

# Window status colors
setw -g window-status-current-style bg=colour244,fg=colour255,bold
setw -g window-status-style bg=colour250,fg=colour232

# Status bar format with indicators
set -g status-left "[#S] "
set -g status-right "#{?client_prefix,ðŸ”´ PREFIX,}#{?pane_in_mode, ðŸ“‹ COPY,} %H:%M"

# Pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U

# Clear screen with Ctrl+L
bind -n C-l send-keys C-l
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi V send -X select-line
bind -T copy-mode-vi C-v send -X rectangle-toggle
bind -T copy-mode-vi y send -X copy-selection

# Enter copy mode and go to top of scrollback
bind [ copy-mode -e

# Vim-style copy mode navigation
setw -g mode-keys vi

# Fast window switching (0-9 and backtick for 0)
bind-key ` select-window -t 0
bind-key 0 select-window -t 0
bind-key 1 select-window -t 1
bind-key 2 select-window -t 2
bind-key 3 select-window -t 3
bind-key 4 select-window -t 4
bind-key 5 select-window -t 5
bind-key 6 select-window -t 6
bind-key 7 select-window -t 7
bind-key 8 select-window -t 8
bind-key 9 select-window -t 9

# Direct window switching without prefix (Alt+number or use function keys if Ctrl+num doesn't work)
bind -n M-\` select-window -t 0
bind -n M-0 select-window -t 0
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# Better copy/paste with system clipboard (optional, requires xclip)
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -i -sel clipboard"

# Shift+Enter for new line
bind-key -n S-Enter send-keys C-j

# Meta+Left/Right for beginning/end of line
bind -n M-Left send-keys Home
bind -n M-Right send-keys End

# Plugin manager and session persistence
set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.local/share/tmux/plugins'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-save-interval '5'
set -g @continuum-restore 'on'

run '~/.local/share/tmux/plugins/tpm/tpm'
